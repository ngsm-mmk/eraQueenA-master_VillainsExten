;アイテム出現条件

@SALEITEM_CHECK
;基本アイテム
REPEAT 39
	IF ITEM:COUNT
		ITEMSALES:COUNT = 0
	ELSE
		ITEMSALES:COUNT = 1
	ENDIF
REND

;婚礼套装は恋慕ルート一人かつ誰かが相亲相爱のとき解禁
ITEMSALES:36 = 0
W = 0
REPEAT CHARANUM
	IF TALENT:COUNT:6
		W = 1
	ENDIF
REND
SIF FLAG:30 >= 1 && W == 1
	ITEMSALES:36 = 1
SIF ITEM:36
	ITEMSALES:36 = 0

;润滑乳液、媚薬、录像带などはとりあえず99個まで
REPEAT 8
	B = 40 + COUNT
	IF ITEM:B >= 99
		ITEMSALES:B = 0
	ELSE
		ITEMSALES:B = 1
	ENDIF
REND
;消費着衣アイテム
REPEAT 2
	B = 50 + COUNT
	IF ITEM:B >= 99
		ITEMSALES:B = 0
	ELSE
		ITEMSALES:B = 1
	ENDIF
REND


;摄像机が無いときは录像带を、照相机が無いときは胶卷の販売をしない
SIF ITEM:18 == 0
	ITEMSALES:43 = 0
SIF ITEM:19 == 0
	ITEMSALES:44 = 0

;脏污无视
IF TALENT:MASTER:64
	ITEMSALES:60 = 0
ELSE
	ITEMSALES:60 = 1
ENDIF

;调和知识
;主人禁断的知识を持っていて、技巧が4以上かつ陷落済みの助手が调和知识を持っている場合、调和知识が買えるようになる
ITEMSALES:61 = 0
IF TALENT:MASTER:144 && TALENT:MASTER:55 == 0 && ABL:MASTER:2 >= 4 && ASSI >= 1
	SIF TALENT:ASSI:55 && (TALENT:ASSI:3 || TALENT:ASSI:4 || TALENT:ASSI:5 || TALENT:ASSI:6 || TALENT:ASSI:7 || TALENT:ASSI:8)
		ITEMSALES:61 = 1
ENDIF


;主人か助手が『调和知识』を持っている
P = 0
IF TALENT:MASTER:55
	P = 1
	ITEMSALES:61 = 0
ELSEIF ASSI > 0
	IF TALENT:ASSI:55
		P = 1
	ENDIF
ENDIF

;主人か助手が『禁断的知识』を持っているとき、売り出されるアイテムが有る
;陷落済みの助手が禁断的知识を持っていると、「禁断的知识」が売り出される
F = 0
ITEMSALES:62 = 0
IF TALENT:MASTER:144
	F = 1
ELSEIF ASSI > 0
	IF TALENT:ASSI:144
		F = 1
		SIF TALENT:ASSI:3 || TALENT:ASSI:4 || TALENT:ASSI:5 || TALENT:ASSI:6 || TALENT:ASSI:7 || TALENT:ASSI:8
			ITEMSALES:62 = 1
	ENDIF
ENDIF


;触手役使术
ITEMSALES:25 = 0
SIF F == 1 && ITEM:25 == 0
	ITEMSALES:25 = 1

;观察眼
ITEMSALES:63 = 0
SIF F == 1 && TALENT:MASTER:156 == 0
	ITEMSALES:63 = 1

;河童の妙薬（条件は调和知识のみ）
ITEMSALES:70 = 0
IF P
	REPEAT CHARANUM
		SIF BASE:COUNT:0 != MAXBASE:COUNT:0 && CFLAG:COUNT:12 == 0
			ITEMSALES:70 = 1
	REND
ENDIF

;進化の秘法
ITEMSALES:28 = 0
SIF F == 1 && ITEM:28 == 0 && ITEM:25 == 1
	ITEMSALES:28 = 1

;对象が奴隶で禁断的知识が条件にかかわるアイテムの初期化
REPEAT 19
	B = 71 + COUNT
	ITEMSALES:B = 0
REND

IF F || P
	REPEAT CHARANUM
		;労役中のキャラは除外
		SIF CFLAG:COUNT:12 > 0
			CONTINUE
		;扶她化できるか
		;既になっていたらダメ
		IF TALENT:COUNT:139 == 0 && TALENT:COUNT:137 == 0
			;禁断的知识がない場合、对象に调和知识か不可思议的根か具现化が必要
			SIF F || (TALENT:COUNT:55 || TALENT:COUNT:138 || TALENT:COUNT:146)
				ITEMSALES:71 = 1
		ENDIF
		;扶她を消去できるか
		SIF TALENT:COUNT:139 || TALENT:COUNT:137
			ITEMSALES:72 = 1
		;母乳体质にできるか、禁断的知识があり母乳体质でないとダメ
		SIF F && TALENT:COUNT:149 == 0
			ITEMSALES:73 = 1
		;处女膜再生できるか、处女および再生处女でなく禁断的知识がないとダメ
		SIF F && TALENT:COUNT:0 == 0 && TALENT:COUNT:1 == 0 && TALENT:COUNT:140 == 0
			ITEMSALES:74 = 1
		;豊胸できるか、禁断的知识があり爆乳以外でないとダメ
		SIF F && TALENT:COUNT:112 == 0 
			ITEMSALES:75 = 1
		;縮胸できるか、禁断的知识があり绝壁以外でないとダメ
		SIF F && TALENT:COUNT:110 == 0
			ITEMSALES:76 = 1
		;母乳治疗できるか、禁断的知识があり母乳体质じゃないとダメ
		SIF F && TALENT:COUNT:149
			ITEMSALES:77 = 1
		;お漏らし治疗できるか、禁断的知识がありお漏らし癖じゃないとダメ
		SIF F && TALENT:COUNT:57
			ITEMSALES:78 = 1
		;卵を産ませる、禁断的知识があり怀孕中で臨月になっていないとダメ
		SIF F && TALENT:COUNT:153 && (CFLAG:COUNT:110 - 3) > DAY
			ITEMSALES:79 = 1
		;性転換できるか、扶她/双性だとだめ、禁断的知识がないとダメ
		SIF F && TALENT:COUNT:137 == 0 && TALENT:COUNT:139 == 0
			ITEMSALES:80 = 1
		;孩童尺寸化できるか、禁断的知识があり小人体型以外でないとダメ
		SIF F && TALENT:COUNT:142 == 0
			ITEMSALES:81 = 1
		;大人化できるか、禁断的知识があり巨大体型以外でないとダメ
		SIF F && TALENT:COUNT:224 == 0
			ITEMSALES:82 = 1
		;精神修复
		SIF F && TALENT:COUNT:141
			ITEMSALES:96 = 1
	REND
ENDIF

;受
ITEMSALES:83 = 0
REPEAT CHARANUM
	IF TALENT:COUNT:157 == 0
		ITEMSALES:83 = 1
	ENDIF
REND

;攻
ITEMSALES:84 = 0
REPEAT CHARANUM
	IF TALENT:COUNT:158 == 0
		ITEMSALES:84 = 1
	ENDIF
REND

;记忆消除药
ITEMSALES:90 = 0
IF F && P
	REPEAT CHARANUM
		SIF COUNT == MASTER
			CONTINUE
		;共犯者にも使えない（あまり意味は無い）
		SIF CFLAG:COUNT:1 == 3
			CONTINUE
		;怀孕中or育儿中もバグになりそうなのでスキップしておく
		SIF TALENT:COUNT:153 || TALENT:COUNT:154
			CONTINUE
		SIF CFLAG:COUNT:12 == 0
			ITEMSALES:90 = 1
	REND
ENDIF

;排卵诱发剂
ITEMSALES:91 = 0
REPEAT CHARANUM
	;SIF COUNT == MASTER
	;	CONTINUE
	SIF CFLAG:COUNT:12 == 0 && CFLAG:COUNT:109 == 0 && TALENT:COUNT:140 == 0 && CFLAG:COUNT:108 == 0
		ITEMSALES:91 = 1
REND

;子宮内避妊結界
ITEMSALES:92 = 0
REPEAT CHARANUM
	;SIF COUNT == MASTER
	;	CONTINUE
	SIF CFLAG:COUNT:12 == 0 && CFLAG:COUNT:108 == 0 && TALENT:COUNT:140 == 0 && CFLAG:COUNT:109 == 0
		ITEMSALES:92 = 1
REND

;隆根剂
ITEMSALES:93 = 0
REPEAT CHARANUM
	SIF F && CFLAG:COUNT:12 == 0 && (TALENT:COUNT:137 || TALENT:COUNT:139 || TALENT:COUNT:140) && TALENT:COUNT:117 == 0
		ITEMSALES:93 = 1
REND

;缩根剂
ITEMSALES:94 = 0
REPEAT CHARANUM
	SIF F && CFLAG:COUNT:12 == 0 && (TALENT:COUNT:137 || TALENT:COUNT:139 || TALENT:COUNT:140) && TALENT:COUNT:114 == 0
		ITEMSALES:94 = 1
REND

;倒带の药
ITEMSALES:95 = 0
IF F && P
	REPEAT CHARANUM
		;SIF COUNT == MASTER
		;	CONTINUE
		SIF CFLAG:COUNT:12 == 0
			ITEMSALES:95 = 1
	REND
ENDIF

;购买道具
@EVENTBUY
;購入したことを分かりやすくしてみよう
SIF BOUGHT <= 39
	PRINTFORMW ＜购入了%ITEMNAME:BOUGHT%＞
SIF (BOUGHT >= 60 && BOUGHT <= 63) || BOUGHT == 25 || BOUGHT == 28 
	PRINTFORMW ＜掌握了%ITEMNAME:BOUGHT%＞
;调教アイテムは買ったら消える
SIF BOUGHT <= 39
	ITEMSALES:BOUGHT = 0
;キャラカードは買ったら消える
IF BOUGHT >= 100
	ITEMSALES:BOUGHT = 0
	ITEM:BOUGHT = 0
ENDIF

;素質アイテム【脏污无视】
SIF BOUGHT == 60
	TALENT:MASTER:64 = 1
;素質アイテム【调和知识】
SIF BOUGHT == 61
	TALENT:MASTER:55 = 1
;素質アイテム【禁断的知识】
SIF BOUGHT == 62
	TALENT:MASTER:144 = 1
;素質アイテム【观察眼】
SIF BOUGHT == 63
	TALENT:MASTER:156 = 1

SIF (BOUGHT >= 40 && BOUGHT <= 49) || (BOUGHT >= 50 && BOUGHT <= 51)
	CALL BUY_PLURAL
SIF (BOUGHT >= 70 && BOUGHT <= 89) || (BOUGHT >= 90 && BOUGHT <= 99)
	CALL USE_ITEM

;口上呼び出し用処理(I:1は@USE_ITEM内で代入済)
TFLAG:13 = 28
I:2 = TARGET
TARGET = I:1
CALL KOJO_MESSAGE_EVENT
TARGET = I:2
I:1 = 0
I:2 = 0

TFLAG:0 = -2

;複数個所持可能なアイテムについて、同時購入個数を選択
@BUY_PLURAL
;現在の購入可能数、Bは所持可能最大数（現在100個）、Cは所持金によるもの
;Aはアイテムの単価、DはBとCのうち小さい方、EはB<=Cであれば0、B>Cであれば1
SIF BOUGHT == 40
	A = 200
SIF BOUGHT == 41
	A = 2000
SIF BOUGHT == 42
	A = 1000
SIF BOUGHT == 43
	A = 500
SIF BOUGHT == 44
	A = 300
SIF BOUGHT == 45
	A = 100
SIF BOUGHT == 46
	A = 2000
SIF BOUGHT == 47
	A = 1000
SIF BOUGHT == 50
	A = 1500
SIF BOUGHT == 51
	A = 1800
B = 100-ITEM:BOUGHT
C = MONEY/A+1
IF B <= C
	D = B
	E = 0
ELSE
	D = C
	E = 1
ENDIF
DRAWLINE
PRINTFORM 要购入多少%ITEMNAME:BOUGHT%？ （1-
PRINTV D
PRINTL 、输入0的话返回）

$INPUT_LOOP
INPUT
IF RESULT == 0
	ITEM:BOUGHT -= 1
	;払い戻し
	MONEY += A
	RETURN 0
ELSEIF RESULT < 0
	GOTO INPUT_LOOP
ELSEIF RESULT > D
	IF RESULT > D && E == 0
		PRINTL 无法持有那么多
	ELSEIF RESULT > D && E == 1
		PRINTL 余额不足
	ENDIF
	GOTO INPUT_LOOP
ELSEIF RESULT == 1
	PRINTFORMW ＜购入了%ITEMNAME:BOUGHT%＞
	RETURN 0
ELSE
	PRINTFORMW ＜购入了{RESULT}个%ITEMNAME:BOUGHT%＞
	ITEM:BOUGHT += RESULT-1
	MONEY -= A*(RESULT-1)
	RETURN 0
ENDIF

;使用道具
@USE_ITEM
DRAWLINE
;アイテムの効果を显示
SIF BOUGHT == 70
	PRINTFORML %ITEMNAME:BOUGHT%:回复目标的体力
SIF BOUGHT == 71
	PRINTFORML %ITEMNAME:BOUGHT%:使目标获得扶她/双性（若有Omega洗脑则会自动失效）
SIF BOUGHT == 72
	PRINTFORML %ITEMNAME:BOUGHT%:消去目标的扶她/双性
SIF BOUGHT == 73
	PRINTFORML %ITEMNAME:BOUGHT%:使目标获得母乳体质
SIF BOUGHT == 74
	PRINTFORML %ITEMNAME:BOUGHT%:再生目标的处女膜
SIF BOUGHT == 75
	PRINTFORML %ITEMNAME:BOUGHT%:对目标实行丰胸手术
SIF BOUGHT == 76
	PRINTFORML %ITEMNAME:BOUGHT%:缩小目标的胸部
SIF BOUGHT == 77
	PRINTFORML %ITEMNAME:BOUGHT%:消去目标的母乳体质
SIF BOUGHT == 78
	PRINTFORML %ITEMNAME:BOUGHT%:治疗目标的漏尿癖
SIF BOUGHT == 79
	PRINTFORML %ITEMNAME:BOUGHT%:强制目标落胎
SIF BOUGHT == 80
	PRINTFORML %ITEMNAME:BOUGHT%:让目标变性（若有Omega洗脑则会自动失效）
SIF BOUGHT == 81
	PRINTFORML %ITEMNAME:BOUGHT%:将目标的体型变小
SIF BOUGHT == 82
	PRINTFORML %ITEMNAME:BOUGHT%:将目标的体型变大
SIF BOUGHT == 83
	PRINTFORML %ITEMNAME:BOUGHT%:使目标变成受
SIF BOUGHT == 84
	PRINTFORML %ITEMNAME:BOUGHT%:使目标变成攻
SIF BOUGHT == 90
	PRINTFORML %ITEMNAME:BOUGHT%:消去目标对调教的记忆
SIF BOUGHT == 91
	PRINTFORML %ITEMNAME:BOUGHT%:当日内怀孕概率上升
SIF BOUGHT == 92
	PRINTFORML %ITEMNAME:BOUGHT%:当日内遏制内射经验增加、避免怀孕
SIF BOUGHT == 93
	PRINTFORML %ITEMNAME:BOUGHT%:变大目标的阴茎
SIF BOUGHT == 94
	PRINTFORML %ITEMNAME:BOUGHT%:变小目标的阴茎
SIF BOUGHT == 95
	PRINTFORML %ITEMNAME:BOUGHT%:恢复目标的身体状态
SIF BOUGHT == 96
	PRINTFORML %ITEMNAME:BOUGHT%:消除目标的疯癫状态
PRINTL 要对谁使用？

REPEAT CHARANUM
	TFLAG:COUNT = 0
	;主人公は排除
	;SIF COUNT == MASTER
	;	CONTINUE
	;労役中のキャラも排除
	SIF CFLAG:COUNT:12 > 0
		CONTINUE
	;成长前の子供は除外
	SIF CFLAG:COUNT:119
		CONTINUE
	SIF BOUGHT == 70 && BASE:COUNT:0 == MAXBASE:COUNT:0
		CONTINUE
	SIF BOUGHT == 71 && (TALENT:COUNT:139 || TALENT:COUNT:137)
		CONTINUE
	SIF BOUGHT == 71 && F == 0 && !TALENT:COUNT:调和知识 && !TALENT:COUNT:不可思议的根 && !TALENT:COUNT:具现化
		CONTINUE
	SIF BOUGHT == 72 && (TALENT:COUNT:139 == 0 && TALENT:COUNT:137 == 0)
		CONTINUE
	;双性の怀孕確定中は扶她を消せない！
	SIF BOUGHT == 72 && TALENT:COUNT:双性 && (TALENT:COUNT:怀孕 || (CFLAG:COUNT:110 && CFLAG:COUNT:110 <= DAY))
		CONTINUE
	SIF BOUGHT == 73 && (TALENT:COUNT:149 || TALENT:COUNT:机器人 || TALENT:COUNT:人偶)
		CONTINUE
	IF BOUGHT == 74 && (TALENT:COUNT:0 || TALENT:COUNT:1 || TALENT:COUNT:140)
		CONTINUE
	ENDIF
	SIF BOUGHT == 75 && TALENT:COUNT:112
		CONTINUE
	SIF BOUGHT == 76 && TALENT:COUNT:110 
		CONTINUE
	SIF BOUGHT == 76 && (TALENT:COUNT:140 && !(TALENT:COUNT:111 ||TALENT:COUNT:112))
		CONTINUE
	SIF BOUGHT == 77 && TALENT:COUNT:149 == 0
		CONTINUE
	SIF BOUGHT == 78 && TALENT:COUNT:57 == 0
		CONTINUE
	SIF BOUGHT == 79 && (TALENT:COUNT:140 || TALENT:COUNT:153 == 0 || (TALENT:COUNT:153 && CFLAG:COUNT:110 - 3 <= DAY) || BASE:COUNT:0 < 1000)
		CONTINUE
	SIF BOUGHT == 80 && (TALENT:COUNT:139 || TALENT:COUNT:137)
		CONTINUE
	;小人体型はそれ以上小さくできない 非人外
	SIF BOUGHT == 81 && TALENT:COUNT:142 && !TALENT:COUNT:人外
		CONTINUE
	;巨大体系はそれ以上大きく出来ない 非人外
	SIF BOUGHT == 82 && TALENT:COUNT:224 && !TALENT:COUNT:人外
		CONTINUE
	;矮小体型はそれ以上小さくできない 人外
	SIF BOUGHT == 81 && TALENT:COUNT:100 && TALENT:COUNT:人外
		CONTINUE
	;高大体系はそれ以上大きく出来ない 人外
	SIF BOUGHT == 82 && TALENT:COUNT:113 && TALENT:COUNT:人外
		CONTINUE
	;受はそれ以上受にできない
	SIF BOUGHT == 83 && TALENT:COUNT:157
		CONTINUE
	;攻はそれ以上攻に出来ない
	SIF BOUGHT == 84 && TALENT:COUNT:158
		CONTINUE
	;主人には記憶消去无　
	SIF BOUGHT == 90 && COUNT == MASTER
		CONTINUE
	;尺寸傲人はそれ以上大きく出来ない
	SIF BOUGHT == 93 && (TALENT:COUNT:117 || (TALENT:COUNT:137 == 0 && TALENT:COUNT:139 == 0 && TALENT:COUNT:140 == 0))
		CONTINUE
	;孩童尺寸はそれ以上小さく出来ない
	SIF BOUGHT == 94 && (TALENT:COUNT:114 || (TALENT:COUNT:137 == 0 && TALENT:COUNT:139 == 0 && TALENT:COUNT:140 == 0))
		CONTINUE
	;怀孕確定､育儿中は不可
	SIF (BOUGHT == 95 || BOUGHT == 80) && (TALENT:COUNT:怀孕 || TALENT:COUNT:育儿中 || (CFLAG:COUNT:110 && CFLAG:COUNT:110 <= DAY))
		CONTINUE
	;没疯癫不行
	SIF BOUGHT == 96 && TALENT:COUNT:141 == 0
		CONTINUE
	;记忆消除药
	IF BOUGHT == 90
		;共犯者にも使えない（あまり意味は無い）
		SIF CFLAG:COUNT:1 == 3
			CONTINUE
		;怀孕中or育儿中もバグになりそうなのでスキップしておく
		SIF TALENT:COUNT:153 || TALENT:COUNT:154
			CONTINUE
	ENDIF
	IF BOUGHT == 91 
		SIF CFLAG:COUNT:109 || CFLAG:COUNT:108
		CONTINUE
	ENDIF
	IF BOUGHT == 92 
		SIF CFLAG:COUNT:109 || CFLAG:COUNT:108
		CONTINUE
	ENDIF
	IF COUNT<10
		PRINTFORM [ {COUNT}]
	ELSE
		PRINTFORM [{COUNT}]
	ENDIF
;	CALL ARRANGE_CHARANAME
	PRINTFORM  %NAME:COUNT,20,LEFT%　
	PRINT 体力
	A = BASE:COUNT:0
	SIF BASE:COUNT:0 < 0
		A = 0
	BAR A,MAXBASE:COUNT:0,16
	;IF A > 999	
		PRINTFORM (%TOSTR(A),4,RIGHT%/%TOSTR(MAXBASE:COUNT:0),4,RIGHT%)
	;ELSE
		;PRINTFORM ( {A}/{MAXBASE:COUNT:0})
	;ENDIF
	IF CFLAG:COUNT:1 == 2
		PRINT 助手可 
	ELSE
		PRINT        
	ENDIF
	;变更系は現在の素質表示
	;ちんこ
	IF (BOUGHT == 93 || BOUGHT == 94)
		IF TALENT:COUNT:114
			PRINT 孩童尺寸
		ELSEIF TALENT:COUNT:115
			PRINT 短小 
		ELSEIF TALENT:COUNT:116
			PRINT 巨根 
		ELSEIF TALENT:COUNT:117
			PRINT 尺寸傲人 
		ELSE
			PRINT 普通
		ENDIF
	;おっぱいおっぱい
	ELSEIF (BOUGHT == 75 || BOUGHT == 76)
		IF TALENT:COUNT:109
				PRINT 贫乳 
		ELSEIF TALENT:COUNT:110
			PRINT 绝壁 
		ELSEIF TALENT:COUNT:111
			IF TALENT:COUNT:140
				PRINT 胸肌结实
			ELSE
				PRINT 巨乳 
			ENDIF
		ELSEIF TALENT:COUNT:112
			IF TALENT:COUNT:140
				PRINT 胸肌发达
			ELSE
				PRINT 巨乳 
			ENDIF 
		ELSE
			PRINT 普通
		ENDIF
	;受攻
	ELSEIF (BOUGHT == 83 || BOUGHT == 84)
		IF TALENT:COUNT:157
			PRINT 受 
		ELSEIF TALENT:COUNT:158
			PRINT 攻
		ENDIF
	;天使恶魔
	ELSEIF (BOUGHT == 81 || BOUGHT == 82)
		IF TALENT:COUNT:142
			PRINT 小人体型 
		ELSEIF TALENT:COUNT:100
			PRINT 矮小体型 
		ELSEIF TALENT:COUNT:113
			PRINT 高大体型
		ELSEIF TALENT:COUNT:224
			PRINT 巨大体型
		ELSE
			PRINT 普通
		ENDIF
	;性別転換系
	ELSEIF BOUGHT == 71 || BOUGHT == 72 || BOUGHT == 80
		IF TALENT:COUNT:140
			PRINT 男 
		ELSEIF TALENT:COUNT:137
			PRINT 双性
		ELSEIF TALENT:COUNT:139
			PRINT 扶她 
		ELSE
			PRINT 女 
		ENDIF
	ENDIF
	PRINTL 
	TFLAG:COUNT = 1
REND
PRINTL [100] 返回

$INPUT_LOOP
INPUT
IF RESULT == 100
	ITEM:BOUGHT = 0
	;払い戻し
	SIF BOUGHT == 70
		MONEY += 1000
	SIF BOUGHT == 71
		MONEY += 20000
	SIF BOUGHT == 72
		MONEY += 10000
	SIF BOUGHT == 73
		MONEY += 20000
	SIF BOUGHT == 74
		MONEY += 20000
	SIF BOUGHT == 75
		MONEY += 20000
	SIF BOUGHT == 76
		MONEY += 10000
	SIF BOUGHT == 77
		MONEY += 5000
	SIF BOUGHT == 78
		MONEY += 5000
	SIF BOUGHT == 79
		MONEY += 20000
	SIF BOUGHT == 80
		MONEY += 50000
	SIF BOUGHT == 81
		MONEY += 10000
	SIF BOUGHT == 82
		MONEY += 10000
	SIF BOUGHT == 83
		MONEY += 100
	SIF BOUGHT == 84
		MONEY += 100
	SIF BOUGHT == 90
		MONEY += 100000
	SIF BOUGHT == 91
		MONEY += 2000
	SIF BOUGHT == 92
		MONEY += 2000
	SIF BOUGHT == 93
		MONEY += 20000
	SIF BOUGHT == 94
		MONEY += 10000
	SIF BOUGHT == 95
		MONEY += 1000000
	SIF BOUGHT == 96
		MONEY += 35000
	RETURN 0
ELSE
	IF RESULT < 0 || RESULT >= CHARANUM
		GOTO INPUT_LOOP
	ELSEIF TFLAG:RESULT == 0
		GOTO INPUT_LOOP
	ENDIF
ENDIF
I:1 = RESULT


;体力回復
IF BOUGHT == 70
	PRINTFORMW ＜%NAME:RESULT%的体力回复了＞
	BASE:RESULT:0 += 300
	SIF BASE:RESULT:0 > MAXBASE:RESULT:0
		BASE:RESULT:0 = MAXBASE:RESULT:0
	CFLAG:RESULT:10 += 5
ENDIF
;扶她化
IF BOUGHT == 71
	;处女・童贞素質のフラグを移动
	C = RESULT
	CALL FUTANARI
	RESULT = C
	CFLAG:RESULT:10 += 2
ENDIF
;扶她を消去
IF BOUGHT == 72
	;处女・童贞素質のフラグを移动
	C = RESULT
	SIF (CFLAG:RESULT:24 & 256) == 0
		CALL SEX_RECORD
	RESULT = C
	;双性
	IF TALENT:RESULT:137
		PRINTFORMW ＜%NAME:RESULT%不再是双性了＞
		TALENT:RESULT:137 = 0
		TALENT:RESULT:140 = 1
		;「处女」素質があったら消去
		IF TALENT:RESULT:0
			TALENT:RESULT:0 = 0
		;「再生处女」素質があったら記録して消去
		ELSEIF TALENT:RESULT:1
			TALENT:RESULT:1 = 0
			CFLAG:RESULT:24 |= 3
		;处女じゃなくなってたらフラグ書き換え
		ELSE
			SIF CFLAG:RESULT:24 & 1
				CFLAG:RESULT:24 -= 1
			CFLAG:RESULT:24 |= 2
		ENDIF
	;扶她
	ELSEIF TALENT:RESULT:139
		PRINTFORMW ＜%NAME:RESULT%不再是扶她了＞
		TALENT:RESULT:139 = 0
		;阴茎尺寸関連の素質をCFLAG:25に保存して消去(1で标准、他はTALENT番号就这样)
		IF TALENT:RESULT:114 
			CFLAG:RESULT:25 = 114
			TALENT:RESULT:114 = 0
		ELSEIF TALENT:RESULT:115
			CFLAG:RESULT:25 = 115
			TALENT:RESULT:115 = 0
		ELSEIF TALENT:RESULT:116
			CFLAG:RESULT:25 = 116
			TALENT:RESULT:116 = 0
		ELSEIF TALENT:RESULT:117
			CFLAG:RESULT:25 = 117
			TALENT:RESULT:117 = 0
		ELSE
			CFLAG:RESULT:25 = 1
		ENDIF
		;「童贞」素質があったら消去
		IF TALENT:RESULT:160
			TALENT:RESULT:160 = 0
		;童贞じゃなくなってたらフラグ書き換え
		ELSE
			CFLAG:RESULT:24 |= 4
		ENDIF
	ENDIF
	CFLAG:RESULT:10 += 2
ENDIF
;母乳体质
IF BOUGHT == 73
	PRINTFORMW ＜%NAME:RESULT%将分泌母乳＞
	TALENT:RESULT:149 = 1
	CFLAG:RESULT:10 += 2
ENDIF
;处女膜再生
IF BOUGHT == 74
	PRINTFORMW ＜%NAME:RESULT%的处女膜再生了＞
	TALENT:RESULT:1 = 1
	CFLAG:RESULT:10 += 2
ENDIF

;豊乳化
IF BOUGHT == 75
	;绝壁→贫乳
	IF TALENT:RESULT:110
		PRINTFORMW ＜%NAME:RESULT%的胸部微微膨胀起来＞
		TALENT:RESULT:110 = 0
		TALENT:RESULT:109 = 1
	;贫乳→普乳
	ELSEIF TALENT:RESULT:109
		PRINTFORMW ＜%NAME:RESULT%的胸部变成了普通的尺寸＞
		TALENT:RESULT:109 = 0
	;普乳→巨乳
	ELSEIF TALENT:RESULT:111 == 0
		IF  TALENT:RESULT:140
			PRINTFORMW ＜%NAME:RESULT%的胸肌变得更加结实了＞
		ELSE
			PRINTFORMW ＜%NAME:RESULT%的胸部变得更为丰满＞
		ENDIF
		TALENT:RESULT:111 = 1
	;巨乳→爆乳
	ELSE
		;矮小体型、小人体型
		IF TALENT:RESULT:100 || TALENT:RESULT:142
			PRINTFORMW ＜%NAME:RESULT%的胸部大到与其体型不符了＞			
		;それ以外
		ELSE
			IF  TALENT:RESULT:140
			PRINTFORMW ＜%NAME:RESULT%的胸肌大到快要从衣服里溢出来了＞
			ELSE
			PRINTFORMW ＜%NAME:RESULT%的乳肉大到快要从衣服里溢出来了＞
			ENDIF
		ENDIF
		TALENT:RESULT:111 = 0
		TALENT:RESULT:112 = 1
	ENDIF
	CFLAG:RESULT:10 += 2
ENDIF

;縮乳化
IF BOUGHT == 76
	;爆乳→巨乳
	IF TALENT:RESULT:112
		IF  TALENT:RESULT:140
			PRINTFORMW ＜%NAME:RESULT%过度发达的胸肌收敛成结实了＞
		ELSE
		PRINTFORMW ＜%NAME:RESULT%丰满的胸部变小了一圈＞
		ENDIF
		TALENT:RESULT:112 = 0
		TALENT:RESULT:111 = 1
	;巨乳→普乳
	ELSEIF TALENT:RESULT:111
		PRINTFORMW ＜%NAME:RESULT%的胸部变成普通的尺寸了＞
		TALENT:RESULT:111 = 0
	;普乳→贫乳
	ELSEIF TALENT:RESULT:109 == 0
		PRINTFORMW ＜%NAME:RESULT%的胸部缩小了＞
		TALENT:RESULT:109 = 1
	;贫乳→绝壁
	ELSE
		PRINTFORMW ＜%NAME:RESULT%的胸部薄到几乎看不出来了＞
		TALENT:RESULT:109 = 0
		TALENT:RESULT:110 = 1
		IF TALENT:RESULT:149
			PRINTFORMW ＜%NAME:RESULT%不再分泌母乳了＞
			TALENT:RESULT:149 = 0
			CFLAG:RESULT:10 += 1
		ENDIF
	ENDIF
	CFLAG:RESULT:10 += 2
ENDIF

;母乳治疗
IF BOUGHT == 77
	PRINTFORMW ＜%NAME:RESULT%不再分泌母乳了＞
	TALENT:RESULT:149 = 0
	CFLAG:RESULT:10 += 2
ENDIF
;お漏らし治疗
IF BOUGHT == 78
	PRINTFORMW ＜%NAME:RESULT%的漏尿癖治好了＞
	TALENT:RESULT:57 = 0
	EXP:RESULT:31 = 0
	CFLAG:RESULT:10 += 2
ENDIF
;黄色いキャンディ
IF BOUGHT == 79
	CALL LAY_EGG
ENDIF

;性別転換
IF BOUGHT == 80
	;处女・童贞素質のフラグを移动
	C = RESULT
	SIF (CFLAG:RESULT:24 & 256) == 0
		CALL SEX_RECORD
	RESULT = C
	;男なら、女に
	IF TALENT:RESULT:140
		IF RESULT == MASTER
			PRINTFORMW %CALLNAME:MASTER%服用了〔性转换的药〕
		ELSE
			PRINTFORMW 〔性转换的药〕被%CALLNAME:RESULT%全部\@(ABL:RESULT:0 < 3) ? 皱着脸 # \@喝下去了
		ENDIF
		IF RESULT == MASTER
			PRINTFORMW %CALLNAME:MASTER%全身上下突然被光线所笼罩
			PRINTW 过了一会儿，意识渐渐模糊，有种仿佛漂浮在光之海上的感觉……
			PRINTFORMW 等待光幕退去，发现%CALLNAME:MASTER%的身体已经完全变成女性了……
			;子供の自分への呼び方を変える
			REPEAT CHARANUM
				IF CSTR:COUNT:1 == "父亲"
					CSTR:COUNT:1 = 母亲
					CSTR:COUNT:2 = 母亲
					MASTERNAME:COUNT = 母亲
				ENDIF
			REND
		ENDIF
		PRINTFORMW ＜%NAME:RESULT%的性别转换了＞
		TALENT:RESULT:140 = 0
		;CFLAG:23があったら胸のサイズ関連の素質を復帰、無かったら随机。ただし体型によってある程度制限する
		IF CFLAG:RESULT:23 == 0
			;小人体型は孩童尺寸、矮小体型は全体的に小さめになるように、高大体型は大きめになるように
			;体型が増えたので確率を細分化し、より体型に即した比率になるようにしてみた
			K:1 = RAND:100
			IF TALENT:RESULT:小人体型
				PRINTFORMW ＜%NAME:RESULT%变成了小精灵一样的少女＞
				TALENT:RESULT:110 = 1
			;矮小のショタならひんにゅー
			ELSEIF TALENT:RESULT:矮小体型 && CFLAG:RESULT:600 == 11
				PRINTFORMW ＜%NAME:RESULT%变成了贫乳的少女＞
				TALENT:RESULT:109 = 1
			ELSEIF (K:1 < 10 && !TALENT:RESULT:矮小体型 && !TALENT:RESULT:高大体型) || (K:1 < 20 && TALENT:RESULT:矮小体型) || (K:1 < 5 && TALENT:RESULT:高大体型)
				PRINTFORMW ＜%NAME:RESULT%变成了贫乳的女性＞
				TALENT:RESULT:110 = 1
			ELSEIF (K:1 < 35 && !TALENT:RESULT:矮小体型 && !TALENT:RESULT:高大体型) || (K:1 < 45 && TALENT:RESULT:矮小体型) || (K:1 < 25 && TALENT:RESULT:高大体型)
				PRINTFORMW ＜%NAME:RESULT%变成了身材苗条的女性＞
				TALENT:RESULT:109 = 1
			ELSEIF (K:1 < 65 && !TALENT:RESULT:矮小体型 && !TALENT:RESULT:高大体型) || (K:1 < 75 && TALENT:RESULT:矮小体型) || (K:1 < 55 && TALENT:RESULT:高大体型)
				PRINTFORMW ＜%NAME:RESULT%变成了身材匀称的女性＞
			ELSEIF (K:1 < 90 && !TALENT:RESULT:矮小体型 && !TALENT:RESULT:高大体型) || (K:1 < 95 && TALENT:RESULT:矮小体型) || (K:1 < 80 && TALENT:RESULT:高大体型)
				PRINTFORMW ＜%NAME:RESULT%变成了身材魅惑的女性＞
				TALENT:RESULT:111 = 1
			ELSEIF TALENT:RESULT:巨大体型
				PRINTFORMW ＜%NAME:RESULT%变成了身材魁梧的女性＞
				TALENT:RESULT:112 = 1
			ELSE
				PRINTFORMW ＜%NAME:RESULT%变成了身材丰满的女性＞
				TALENT:RESULT:112 = 1
			ENDIF
		ELSEIF CFLAG:RESULT:23 >= 109 && CFLAG:RESULT:23 <= 112
			A = CFLAG:RESULT:23
			TALENT:RESULT:A = 1
		ENDIF
		
		;Omega洗脑消除
		IF TALENT:C:164
			TALENT:C:164 = 0
			PRINTFORMW ＜%NAME:C%失去了Omega的洗脑效果＞
		ENDIF
		
		;非处女関連フラグが立っていないとき「处女」を足す
		IF (CFLAG:RESULT:24 & 3) == 0
			TALENT:RESULT:0 = 1
		;再生处女フラグ
		ELSEIF CFLAG:RESULT:24 & 1
			TALENT:RESULT:1 = 1
		ENDIF
		;非童贞だったら記録
		SIF TALENT:RESULT:160 == 0
			CFLAG:RESULT:24 |= 4
		TALENT:RESULT:160 = 0
		;阴茎尺寸関連の素質をCFLAG:25に保存して消去(1で标准、他はTALENT番号就这样)
		IF TALENT:RESULT:114 
			CFLAG:RESULT:25 = 114
			TALENT:RESULT:114 = 0
		ELSEIF TALENT:RESULT:115
			CFLAG:RESULT:25 = 115
			TALENT:RESULT:115 = 0
		ELSEIF TALENT:RESULT:116
			CFLAG:RESULT:25 = 116
			TALENT:RESULT:116 = 0
		ELSEIF TALENT:RESULT:117
			CFLAG:RESULT:25 = 117
			TALENT:RESULT:117 = 0
		ELSE
			CFLAG:RESULT:25 = 1
		ENDIF

		;伪娘や大叔の素質をCFLAG:26に保存して消去
		IF TALENT:RESULT:伪娘
			SETBIT CFLAG:RESULT:26, 0
			TALENT:RESULT:伪娘 = 0
		ENDIF
		IF TALENT:RESULT:大叔
			SETBIT CFLAG:RESULT:26, 1
			TALENT:RESULT:大叔 = 0
		ENDIF
		CFLAG:RESULT:10 += 5
	;女なら、男に
	ELSE
		IF RESULT == MASTER
			PRINTFORMW %CALLNAME:MASTER%服用了〔性转换的药〕
		ELSE
			PRINTFORMW 〔性转换的药〕被%CALLNAME:RESULT%全部\@(ABL:RESULT:0 < 3) ? 皱着脸 # \@喝下去了
		ENDIF
		IF RESULT == MASTER
			PRINTFORMW %CALLNAME:MASTER%全身上下突然被光线所笼罩
			PRINTW 过了一会儿，意识渐渐模糊，有种仿佛漂浮在光之海上的感觉……
			PRINTFORMW 等待光幕退去，发现%CALLNAME:MASTER%的身体已经完全变成男性了……
			;子供の自分への呼び方を変える
			REPEAT CHARANUM
				IF CSTR:COUNT:1 == "母亲"
					CSTR:COUNT:1 = 父亲
					CSTR:COUNT:2 = 父亲
					MASTERNAME:COUNT = 父亲
				ENDIF
			REND
		ENDIF
		PRINTFORMW ＜%NAME:RESULT%的性别转换了＞
		TALENT:RESULT:140 = 1
		
		;CFLAG:25があったら阴茎尺寸関連の素質を復帰、無かったら随机。ただし体型によってある程度制限する
		IF CFLAG:RESULT:25 == 0
			K:1 = RAND:100
			;小人体型は孩童尺寸、矮小体型は全体的に小さめになるように、高大体型は大きめになるように
			;体型が増えたので確率を細分化し、より体型に即した比率になるようにしてみた
			IF TALENT:RESULT:142
				PRINTFORMW ＜%NAME:RESULT%变成了极为娇小的少年＞
				TALENT:RESULT:114 = 1
			ELSEIF (K:1 < 10 && TALENT:RESULT:100 == 0 && TALENT:RESULT:113 == 0) || (K:1 < 20 && TALENT:RESULT:100) || (K:1 < 5 && TALENT:RESULT:113)
				PRINTFORMW ＜%NAME:RESULT%变成了充满少年感的男性＞
				TALENT:RESULT:114 = 1
			ELSEIF (K:1 < 35 && TALENT:RESULT:100 == 0 && TALENT:RESULT:113 == 0) || (K:1 < 45 && TALENT:RESULT:100) || (K:1 < 25 && TALENT:RESULT:113)
				PRINTFORMW ＜%NAME:RESULT%变成了年幼体态的男性＞
				TALENT:RESULT:115 = 1
			ELSEIF (K:1 < 65 && TALENT:RESULT:100 == 0 && TALENT:RESULT:113 == 0) || (K:1 < 75 && TALENT:RESULT:100) || (K:1 < 55 && TALENT:RESULT:113)
				PRINTFORMW ＜%NAME:RESULT%变成了身材匀称的男性＞
			ELSEIF (K:1 < 90 && TALENT:RESULT:100 == 0 && TALENT:RESULT:113 == 0) || (K:1 < 95 && TALENT:RESULT:100) || (K:1 < 80 && TALENT:RESULT:113)
				PRINTFORMW ＜%NAME:RESULT%变成了身材健壮的男性＞
				TALENT:RESULT:116 = 1
			ELSEIF TALENT:RESULT:巨大体型
                PRINTFORMW ＜%NAME:RESULT%变成了身材魁梧的男性＞
                TALENT:RESULT:117 = 1
			ELSE
				PRINTFORMW ＜%NAME:RESULT%变成了尺寸傲人的男性＞
				TALENT:RESULT:117 = 1
			ENDIF
		ELSEIF CFLAG:RESULT:25 >= 114 && CFLAG:RESULT:25 <= 117
			A = CFLAG:RESULT:25
			TALENT:RESULT:A = 1
		ENDIF

		;CFLAG:26があったら関連素質を復帰
		SIF GETBIT(CFLAG:RESULT:26, 0)
			TALENT:RESULT:伪娘 = 1
		SIF GETBIT(CFLAG:RESULT:26, 1)
			TALENT:RESULT:大叔 = 1

		;胸のサイズ関連の素質をCFLAG:23に保存して消去(1で标准、他はTALENT番号就这样)
		IF TALENT:RESULT:109 
			CFLAG:RESULT:23 = 109
			TALENT:RESULT:109 = 0
		ELSEIF TALENT:RESULT:110
			CFLAG:RESULT:23 = 110
			TALENT:RESULT:110 = 0
		ELSEIF TALENT:RESULT:111
			CFLAG:RESULT:23 = 111
			TALENT:RESULT:111 = 0
		ELSEIF TALENT:RESULT:112
			CFLAG:RESULT:23 = 112
			TALENT:RESULT:112 = 0
		ELSE
			CFLAG:RESULT:23 = 1
		ENDIF

		;非童贞関連フラグが立っていないとき足す
		SIF (CFLAG:RESULT:24 & 4) == 0
			TALENT:RESULT:160 = 1
		;处女だったら消去
		IF TALENT:RESULT:0
			TALENT:RESULT:0 = 0
		;再生处女だったら記録して消去
		ELSEIF TALENT:RESULT:1
			TALENT:RESULT:1 = 0
			CFLAG:RESULT:24 |= 3
		;处女を失っていたら非处女フラグ
		ELSEIF TALENT:RESULT:0 == 0 && TALENT:RESULT:1 == 0
			SIF CFLAG:RESULT:24 & 1
				CFLAG:RESULT:24 -= 1
			CFLAG:RESULT:24 |= 2
		ENDIF

		CFLAG:RESULT:10 += 5
	ENDIF

ENDIF

;幼儿退行
IF BOUGHT == 81
	;「矮小体型」なら「小人体型」に、阴茎も孩童尺寸に、毛も生えなくなる
	IF TALENT:RESULT:100
		TALENT:RESULT:100 = 0
		TALENT:RESULT:142 = 1
		IF TALENT:RESULT:140 || TALENT:RESULT:139 || TALENT:RESULT:137
			TALENT:RESULT:114 = 1
			TALENT:RESULT:115 = 0
			TALENT:RESULT:116 = 0
			TALENT:RESULT:117 = 0
			TALENT:RESULT:118 = 1
		ENDIF
		PRINTFORMW ＜%NAME:RESULT%无法变得更娇小了＞
	;高大体型なら、普通の体型に
	ELSEIF TALENT:RESULT:113
		TALENT:RESULT:113 = 0
		PRINTFORMW ＜%NAME:RESULT%变成普通的体型了＞
	ELSEIF TALENT:RESULT:224
		TALENT:RESULT:224 = 0
		TALENT:RESULT:113 = 1
		PRINTFORMW ＜%NAME:RESULT%变成人类的体型了＞
	;普通の体型なら「矮小体系」に
	ELSE
		TALENT:RESULT:100 = 1
		PRINTFORMW ＜%NAME:RESULT%变得相当娇小了＞
	ENDIF
	CFLAG:RESULT:10 += 2
ENDIF

;成长
IF BOUGHT == 82
	;「小人体型」なら「矮小体型」に、毛が生えてくる
	IF TALENT:RESULT:142
		TALENT:RESULT:142 = 0
		TALENT:RESULT:100 = 1
		IF TALENT:RESULT:140 || TALENT:RESULT:139 || TALENT:RESULT:137
			TALENT:RESULT:114 = 0
			TALENT:RESULT:118 = 0
		ENDIF
		PRINTFORMW ＜%NAME:RESULT%变成了大人的体型＞
	;矮小体型なら、普通の体型に
	ELSEIF TALENT:RESULT:100
		TALENT:RESULT:100 = 0
		PRINTFORMW ＜%NAME:RESULT%的个子变成平均身高了＞
	ELSEIF TALENT:RESULT:113
		TALENT:RESULT:113 = 0
		TALENT:RESULT:224 = 1
		PRINTFORMW ＜%NAME:RESULT%变成巨人的体型了＞
	;普通の体型なら「高大体系」に
	ELSE
		TALENT:RESULT:113 = 1
		PRINTFORMW ＜%NAME:RESULT%长高了＞
	ENDIF
	CFLAG:RESULT:10 += 2
ENDIF

;受
IF BOUGHT == 83
	;「攻」なら素質消去
	IF TALENT:RESULT:158
		TALENT:RESULT:158 = 0
	;無ければ受に
	ELSE
		TALENT:RESULT:157 = 1
	ENDIF
ENDIF

;攻
IF BOUGHT == 84
	;「受」なら素質消去
	IF TALENT:RESULT:157
		TALENT:RESULT:157 = 0
	;無ければ攻に
	ELSE
		TALENT:RESULT:158 = 1
	ENDIF
ENDIF

;記憶消去
IF BOUGHT == 90
	;条件が揃っているとき、のとを漂白する
	;条件＝購入後or記憶消去後or巻き戻し後、未调教のまま更に記憶消去した場合
	IF NO:RESULT == 75 && CFLAG:RESULT:120 == 0 && CFLAG:RESULT:0 == 0
		ADDSPCHARA NO:RESULT
		PRINTW …………？
		PRINTFORMW %CALLNAME:RESULT%的气质完全变了……
		PRINTFORMW ＜%NAME:RESULT%失去了有关调教的记忆＞
	ELSE
		ADDCHARA NO:RESULT
		PRINTFORMW ＜%NAME:RESULT%失去了有关调教的记忆＞
	ENDIF
	TARGET = CHARANUM-1
	;身体特徴素質は維持される
	REPEAT 50
		A = COUNT + 100
		SIF (COUNT > 29 && COUNT < 37) || COUNT == 41 || COUNT == 44 || COUNT == 48 || COUNT == 50
			CONTINUE
		TALENT:TARGET:A = 0
		SIF TALENT:RESULT:A
			TALENT:TARGET:A = TALENT:RESULT:A
	REND
	
	;处女、再生处女、烙印、童贞、后庭处子は就这样
	REPEAT 2
		A = COUNT
		TALENT:TARGET:A = 0
		SIF TALENT:RESULT:A
			TALENT:TARGET:A = TALENT:RESULT:A
	REND
	REPEAT 3
		A = COUNT + 159
		TALENT:TARGET:A = 0
		SIF TALENT:RESULT:A
			TALENT:TARGET:A = TALENT:RESULT:A
	REND
	;经验
	REPEAT 71
		EXP:TARGET:COUNT = EXP:RESULT:COUNT
	REND
	;能力
	REPEAT 4
		A = COUNT + 3
		ABL:TARGET:A = ABL:RESULT:A
	REND
	DELCHARA RESULT
	TARGET = CHARANUM-1
ENDIF

;排卵诱发剂
IF BOUGHT == 91
	PRINTFORMW ＜对%NAME:RESULT%使用了排卵诱发剂＞
	CFLAG:RESULT:109 = 1
ENDIF

;子宮内避妊具
IF BOUGHT == 92
	PRINTFORMW ＜对%NAME:RESULT%使用了高性能避孕具＞
	CFLAG:RESULT:108 = 1
ENDIF

;隆根剂
IF BOUGHT == 93
	;「孩童尺寸」なら「短小」に
	IF TALENT:RESULT:114
		TALENT:RESULT:114 = 0
		TALENT:RESULT:115 = 1
		PRINTFORMW ＜%NAME:RESULT%拥有了大人的阴茎＞
	;「短小」なら、普通サイズに
	ELSEIF TALENT:RESULT:115
		TALENT:RESULT:115 = 0
		PRINTFORMW ＜%NAME:RESULT%的阴茎变成正常尺寸了＞
	;
	ELSEIF TALENT:RESULT:116
		TALENT:RESULT:116 = 0
		TALENT:RESULT:117 = 1
		PRINTFORMW ＜%NAME:RESULT%的阴茎变得尺寸傲人了＞
	;普通サイズなら「巨根」に
	ELSE
		TALENT:RESULT:116 = 1
		PRINTFORMW ＜%NAME:RESULT%的阴茎变大了一圈＞
	ENDIF
	CFLAG:RESULT:10 += 2
ENDIF


;缩根剂
IF BOUGHT == 94
	;「短小」なら「孩童尺寸」に
	IF TALENT:RESULT:115
		TALENT:RESULT:115 = 0
		TALENT:RESULT:114 = 1
		PRINTFORMW %CALLNAME:RESULT%看到阴茎极端缩小，不由一脸惊愕
		PRINTFORMW ＜%NAME:RESULT%的阴茎变成孩童尺寸了＞
	;「巨根」なら、普通サイズに
	ELSEIF TALENT:RESULT:116
		TALENT:RESULT:116 = 0
		PRINTFORML %CALLNAME:RESULT%看到自己的巨根缩小为正常人的尺寸
		PRINTW 好像受到了一点打击
		PRINTFORMW ＜%NAME:RESULT%的阴茎缩小为正常人尺寸＞
	;「尺寸傲人」なら「巨根」に
	ELSEIF TALENT:RESULT:117
		TALENT:RESULT:117 = 0
		TALENT:RESULT:116 = 1
		PRINTFORML %CALLNAME:RESULT%看到自己尺寸傲人的阴茎小了一圈
		PRINTW 脸上呈现出有些寂寞的神情
		PRINTFORMW ＜%NAME:RESULT%的阴茎变小了＞
	;普通サイズなら「短小」に
	ELSE
		PRINTFORML %CALLNAME:RESULT%看到自己的阴茎变小了
		PRINTW 似乎受到了打击
		TALENT:RESULT:115 = 1
		PRINTFORMW ＜%NAME:RESULT%的阴茎变小了＞
	ENDIF
	CFLAG:RESULT:10 += 5
ENDIF


;倒带の药
IF BOUGHT == 95
	ADDCHARA NO:RESULT
	TARGET = CHARANUM-1
	;陷落素質、素質の変化は就这样
	REPEAT 90
		A = COUNT
		TALENT:TARGET:A = 0
		SIF TALENT:RESULT:A
			TALENT:TARGET:A = TALENT:RESULT:A
	REND
	IF TALENT:RESULT:91
		TALENT:TARGET:90 = 0
		TALENT:TARGET:91 = 1
	ENDIF
	;经验は消える
	;感覚系、技能は消える
	REPEAT 22
		A = COUNT
		SIF (A > 1 && A < 7) || (A > 11 && A < 15)
			CONTINUE
		ABL:TARGET:A = ABL:RESULT:A
	REND
	;刻印は就这样
	REPEAT 5
		A = COUNT
		MARK:TARGET:A = MARK:RESULT:A
	REND
	;CFLAG移动
	REPEAT 1000
		A = COUNT
		;处女童贞后庭处子記録フラグスキップ
		SIF COUNT == 24
			CONTINUE
		CFLAG:TARGET:A = CFLAG:RESULT:A
	REND
	;怀孕パッチまわりのフラグを重置
	;分娩は回避可能ってことでok？
	C = RESULT
	CALL CLEAR_FLAG
	RESULT = C
	PRINTFORMW ＜%NAME:C%的身体恢复原状＞
	DELCHARA RESULT
	TARGET = CHARANUM-1
	CFLAG:RESULT:10 += 10
ENDIF

;消除疯癫
IF BOUGHT == 96
	PRINTFORMW ＜%NAME:RESULT%的疯癫状态消除了＞
	TALENT:RESULT:141 = 0
ENDIF

;アイテムによる崩溃の処理
IF CFLAG:RESULT:10 >= 100 && TALENT:RESULT:9 == 0
	A = RESULT
	CALL COLLAPSE_MIND_ITEM
	RESULT = A
ENDIF

RETURN 0


;産卵イベント　イメージとしては、非常にリスキーだが上手くやれば怀孕を无效にできるイベント
@LAY_EGG
;イベント口上
;U = 0
;IF ASSI > 0
;	SIF ASSI == RESULT
;		U = 1
;ENDIF
TFLAG:403 = TARGET
TFLAG:404 = ASSI
TARGET = RESULT
TFLAG:13 = 10
CALL KOJO_MESSAGE_EVENT
;RESULT = TARGET
;SIF U
;	ASSI = RESULT
IF TARGET == MASTER
	PRINTFORMW 产完卵后，%PLAYER_NAME(1)%的肚子变回到怀孕前的大小
	PRINTFORMW %NAME%失去了[%TALENTNAME:153%]
	TALENT:153 = 0
	;怀孕イベントで減った体力の最大値が回復（少なめ）　主人は体力減らないようにした
	;MAXBASE:0 += 300
	;胸の縮小処理を実行
	SIF !MALE(TARGET)
		PRINTW 同时，胸部好像也缩水了
ELSE
	PRINTFORMW 产完卵后，%CALLNAME%的肚子变回到怀孕前的大小
	PRINTFORMW %NAME%失去了[%TALENTNAME:153%]
	TALENT:153 = 0
	;怀孕イベントで減った体力の最大値が回復（少なめ）
	MAXBASE:0 += 300
	;胸の縮小処理を実行
	SIF !MALE(TARGET)
		PRINTW 同时，胸部好像也缩水了
	PRINTFORMW %CALLNAME%的体力消耗得很厉害
	PRINTFORMW 稍微休息一下比较好…
ENDIF
C = TARGET
SIF !MALE(TARGET)
	CALL REVERSE_B_SIZE
CALL CLEAR_FLAG

;ストレス値の補正の決定
;ABL:顺从をみる
IF ABL:0 == 0
	A = 0
ELSEIF ABL:0 == 1
	A = 2
ELSEIF ABL:0 == 2
	A = 4
ELSEIF ABL:0 == 3
	A = 6
ELSEIF ABL:0 == 4
	A = 8
ELSE
	A = 10
ENDIF

;ABL:Ｖ感觉をみる
IF ABL:4 == 0
	B = 0
ELSEIF ABL:4 == 1
	B = 2
ELSEIF ABL:4 == 2
	B = 4
ELSEIF ABL:4 == 3
	B = 6
ELSEIF ABL:4 == 4
	B = 8
ELSE
	B = 10
ENDIF

;EXP:Ｖ经验をみる
IF EXP:0 < EXPLV:1
	C = 0
ELSEIF EXP:0 < EXPLV:2
	C = 2
ELSEIF EXP:0 < EXPLV:3
	C = 4
ELSEIF EXP:0 < EXPLV:4
	C = 6
ELSEIF EXP:0 < EXPLV:5
	C = 8
ELSE
	C = 10
ENDIF

;EXP:产卵经验をみる
IF EXP:59 < EXPLV:2
	D = 100
ELSEIF EXP:59 < EXPLV:4
	D = 60
ELSEIF EXP:59 < EXPLV:5
	D = 40
ELSE
	D = 20
ENDIF

;陷落素質を見る
SIF TALENT:3
	E = 120
SIF TALENT:4
	E = 80
SIF TALENT:5
	E = 60
SIF TALENT:6
	E = 150
SIF TALENT:7
	E = 60
SIF TALENT:8
	E = 40
SIF TALENT:9
	E = 0

F = D*(100-A+B+C)*E/10000

EXP:0 += 5
EXP:52 += 1
EXP:59 += 1
PRINTL Ｖ经验＋５
PRINTL Ｖ扩张经验＋１
PRINTL 产卵经验＋１
IF EXP:60 == 1 && EXP:52 == 1
	EXP:50 += 3
	PRINTFORML 异常经验＋3
ELSEIF EXP:60 == 1
	EXP:50 += 2
	PRINTFORML 异常经验＋2
ELSEIF EXP:52 == 1
	EXP:50 += 1
	PRINTFORML 异常经验＋1
ENDIF
WAIT
IF TARGET != MASTER
	CFLAG:10 += F
	BASE:0 = 10
	;崩溃処理
	RESULT = TARGET
	SIF CFLAG:10 >= 100 && TALENT:9 == 0
		CALL COLLAPSE_MIND_ITEM

	PRINTFORMW 
	;休憩フラグを立てる
	FLAG:0 = 1
ENDIF
TARGET = TFLAG:403
ASSI = TFLAG:404
BEGIN TURNEND


;アイテムで【崩溃】を得た場合のイベント
@COLLAPSE_MIND_ITEM
PRINTFORMW %CALLNAME:RESULT%的样子有些奇怪
PRINTFORMW 在药物的影响下，%CALLNAME:RESULT%的精神似乎发生了异常
PRINTFORMW %NAME:RESULT%【崩溃】了
TALENT:RESULT:9 = 1
IF TALENT:RESULT:3 || TALENT:RESULT:4 || TALENT:RESULT:5 || TALENT:RESULT:6 || TALENT:RESULT:7 || TALENT:RESULT:8
	PRINTFORM %CALLNAME:RESULT%失去了[
	SIF TALENT:RESULT:3
		PRINTS TALENTNAME:3
	SIF TALENT:RESULT:4
		PRINTS TALENTNAME:4
	SIF TALENT:RESULT:5
		PRINTS TALENTNAME:5
	SIF TALENT:RESULT:6
		PRINTS TALENTNAME:6
	SIF TALENT:RESULT:7
		PRINTS TALENTNAME:7
	SIF TALENT:RESULT:8
		PRINTS TALENTNAME:8
	PRINTW ]
	SIF TALENT:RESULT:3
		TALENT:RESULT:3 = 0
	SIF TALENT:RESULT:4
		TALENT:RESULT:4 = 0
	SIF TALENT:RESULT:5
		TALENT:RESULT:5 = 0
	SIF TALENT:RESULT:6
		TALENT:RESULT:6 = 0
	SIF TALENT:RESULT:7
		TALENT:RESULT:7 = 0
	SIF TALENT:RESULT:8
		TALENT:RESULT:8 = 0
ENDIF

;具现化持ちの子が扶她化するときにもまとめて判定されるように独立した関数にしてみる
@FUTANARI
;处女・童贞素質のフラグを移动
SIF (CFLAG:C:24 & 256) == 0
	CALL SEX_RECORD
;男性のときは双性になる
IF TALENT:C:140
	PRINTFORMW ＜%NAME:C%变成双性了＞
	TALENT:C:138 = 0
	TALENT:C:146 = 0
	TALENT:C:140 = 0
	TALENT:C:137 = 1
	;处女関連フラグが立っていないとき足す
	IF (CFLAG:C:24 & 3) == 0
		TALENT:C:0 = 1
	;再生处女
	ELSEIF CFLAG:C:24 & 1
		TALENT:C:1 = 1
	ENDIF
	;Omega洗脑消除
	IF TALENT:C:164
		TALENT:C:164 = 0
	PRINTFORMW ＜%NAME:C%失去了Omega的洗脑效果＞
	ENDIF		
ELSE
	PRINTFORMW ＜%NAME:C%变成扶她了＞
	TALENT:C:138 = 0
	TALENT:C:146 = 0
	TALENT:C:139 = 1
	;CFLAG:25があったら阴茎尺寸関連の素質を復帰、無かったら随机。ただし体型によってある程度制限する
	IF CFLAG:C:25 == 0
		K:1 = RAND:100
		;小人体型は孩童尺寸、矮小体型は全体的に小さめになるように、高大体型は大きめになるように
		;体型が増えたので確率を細分化し、より体型に即した比率になるようにしてみた
		IF TALENT:C:142
			PRINTFORMW ＜%NAME:C%长出了小小的阴茎＞
			TALENT:C:114 = 1
		ELSEIF (K:1 < 10 && TALENT:C:100 == 0 && TALENT:C:113 == 0) || (K:1 < 20 && TALENT:C:100) || (K:1 < 5 && TALENT:C:113)
			PRINTFORMW ＜%NAME:C%长出了小小的阴茎＞
			TALENT:C:114 = 1
		ELSEIF (K:1 < 35 && TALENT:C:100 == 0 && TALENT:C:113 == 0) || (K:1 < 45 && TALENT:C:100) || (K:1 < 25 && TALENT:C:113)
			PRINTFORMW ＜%NAME:C%长出了小小的阴茎＞
			TALENT:C:115 = 1
		ELSEIF (K:1 < 65 && TALENT:C:100 == 0 && TALENT:C:113 == 0) || (K:1 < 75 && TALENT:C:100) || (K:1 < 55 && TALENT:C:113)
			PRINTFORMW ＜%NAME:C%长出了阴茎＞
		ELSEIF (K:1 < 90 && TALENT:C:100 == 0 && TALENT:C:113 == 0) || (K:1 < 95 && TALENT:C:100) || (K:1 < 80 && TALENT:C:113)
			PRINTFORMW ＜%NAME:C%长出了粗大的阴茎＞
			TALENT:C:116 = 1
		ELSE
			PRINTFORMW ＜%NAME:C%长出了与自己体型不符的傲人阴茎＞
			TALENT:C:117 = 1
		ENDIF
	ELSEIF CFLAG:C:25 >= 114 && CFLAG:C:25 <= 117
		A = CFLAG:C:25
		TALENT:C:A = 1
	ENDIF
	;CFLAG:C:24に従い「童贞」素質を取得
	SIF (CFLAG:C:24 & 4) == 0
		TALENT:C:160 = 1
ENDIF

;仕様を無理やり変えたのでこっちで一括判定
@SEX_RECORD
;CFLAG:24 |1=再生处女 |2=非处女 |4=非童贞 |256 = 仕様变更後
;SINGLE使えるのか良く分からなかったのでこういうことに
;双性＝男性ベース扶她実装に伴い若干仕様变更
IF (CFLAG:C:24 & 256) == 0
	;男性で再生处女フラグ
	IF CFLAG:C:24 == 11 && TALENT:C:140
		CFLAG:C:24 = 1
	;男性で非处女フラグ
	ELSEIF CFLAG:C:24 == 1 && TALENT:C:140
		CFLAG:C:24 = 2
	;男性、扶她、半陰陽以外で非童贞フラグ
	ELSEIF CFLAG:C:24 == 1 && (TALENT:C:140 == 0 && TALENT:C:137 == 0 && TALENT:C:139 == 0)
		CFLAG:C:24 = 4
	;もしそれ以外があったら0にしておく
	ELSE
		CFLAG:C:24 = 0
	ENDIF
	CFLAG:C:24 |= 256
ENDIF


@ITEM_LIST
CALL KAIGYO
TFLAG:0 = -1
DRAWLINE
PRINTFORML 所持金：${MONEY} 
DRAWLINE
PRINTL ＜ 通常道具 ＞
E = 0
IF ITEM:0
	PRINTFORM [跳蛋] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:1
	PRINTFORM [电动按摩棒]  　
	CALL LINE_FEED
ENDIF
IF ITEM:2
	PRINTFORM [阴蒂夹] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:10
	PRINTFORM [振动乳头夹] 　
	CALL LINE_FEED
ENDIF
IF ITEM:3
	PRINTFORM [飞机杯] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:4
	PRINTFORM [自慰棒] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:5
	PRINTFORM [肛塞] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:6
	PRINTFORM [后庭拉珠] 　 　
	CALL LINE_FEED
ENDIF
IF ITEM:25
	PRINTFORM [触手役使术]  　
	CALL LINE_FEED
ENDIF
IF ITEM:28
	PRINTFORM [进化之秘法]  　
	CALL LINE_FEED
ENDIF
IF ITEM:7
	PRINTFORM [打气筒] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:8
	PRINTFORM [扩张气球] 　 　
	CALL LINE_FEED
ENDIF
IF ITEM:9
	PRINTFORM [灌肠器＋塞头]　
	CALL LINE_FEED
ENDIF
IF ITEM:11
	PRINTFORM [挤奶器] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:12
	PRINTFORM [捆绑式假阴茎]　
	CALL LINE_FEED
ENDIF
IF ITEM:13
	PRINTFORM [鞭子] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:14
	PRINTFORM [针] 　 　　  　
	CALL LINE_FEED
ENDIF
IF ITEM:15
	PRINTFORM [眼罩] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:16
	PRINTFORM [绳子] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:17
	PRINTFORM [口塞球] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:24
	PRINTFORM [电极接头] 　 　
	CALL LINE_FEED
ENDIF
IF ITEM:26
	PRINTFORM [蝴蝶结] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:27
	PRINTFORM [导尿管] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:18
	PRINTFORM [摄像机] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:19
	PRINTFORM [照相机] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:20
	PRINTFORM [塑料地垫] 　 　
	CALL LINE_FEED
ENDIF
IF ITEM:21
	PRINTFORM [大镜子] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:22
	PRINTFORM [项圈] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:23
	PRINTFORM [围裙] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:29
	PRINTFORM [笼子] 　 　　　
	CALL LINE_FEED
ENDIF

IF ITEM:30
	PRINTFORM [贞操带] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:31
	PRINTFORM [猫耳] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:32
	PRINTFORM [犬耳] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:33
	PRINTFORM [兔耳] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:34
	PRINTFORM [三角巾] 　 　　
	CALL LINE_FEED
ENDIF
IF ITEM:35
	PRINTFORM [耳机] 　 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:36
	PRINTFORM [婚礼套装] 　 　
	CALL LINE_FEED
ENDIF
PRINTL
PRINTL ＜ 消耗道具 ＞
IF ITEM:40
	PRINTFORM [润滑乳液({ITEM:40})] 
	SIF ITEM:40 < 10
		PRINT  
	PRINT 　
	CALL LINE_FEED
ENDIF
IF ITEM:41
	PRINTFORM [媚药({ITEM:41})] 
	SIF ITEM:41 < 10
		PRINT  
	PRINT         
	CALL LINE_FEED
ENDIF
IF ITEM:42
	PRINTFORM [利尿剂({ITEM:42})] 
	SIF ITEM:42 < 10
		PRINT  
	PRINT 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:45
	PRINTFORM [避孕套({ITEM:45})] 
	SIF ITEM:45 < 10
		PRINT  
	PRINT 　　　
	CALL LINE_FEED
ENDIF
IF ITEM:46
	PRINTFORM [低温蜡烛({ITEM:46})] 
	SIF ITEM:46 < 10
		PRINT  
	PRINT 　
	CALL LINE_FEED
ENDIF
IF ITEM:47
	PRINTFORM [强精神药({ITEM:47})] 
	SIF ITEM:47 < 10
		PRINT  
	PRINTFORM 　　
	CALL LINE_FEED
ENDIF
IF ITEM:43
	PRINTFORM [录像带({ITEM:43})] 　　　
	SIF ITEM:43 < 10
		PRINT  
	CALL LINE_FEED
ENDIF
IF ITEM:44
	PRINTFORM [胶卷({ITEM:44})] 
	SIF ITEM:44 < 10
		PRINT  
	PRINTFORM         
	CALL LINE_FEED
ENDIF
IF ITEM:50
	PRINTFORM [丝袜({ITEM:50})] 
	SIF ITEM:50 < 10
		PRINT  
	PRINTFORM       
	CALL LINE_FEED
ENDIF
IF ITEM:51
	PRINTFORM [网袜({ITEM:51})] 
	SIF ITEM:51 < 10
		PRINT  
	PRINTFORM        
	CALL LINE_FEED
ENDIF
;IF ITEM:60
;	PRINTFORM 【脏污无视({ITEM:60})】
;	SIF ITEM:60 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:61
;	PRINTFORM 【调和知识({ITEM:61})】
;	SIF ITEM:61 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:62
;	PRINTFORM 【禁断的知识({ITEM:62})】
;	SIF ITEM:62 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:63
;	PRINTFORM 【观察眼({ITEM:63})】
;	SIF ITEM:63 < 10
;		PRINT  
;	PRINTFORM  　　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:83
;	PRINTFORM 【受({ITEM:83})】
;	SIF ITEM:83 < 10
;		PRINT  
;	PRINTFORM  　　　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:84
;	PRINTFORM 【攻({ITEM:84})】
;	SIF ITEM:84 < 10
;		PRINT  
;	PRINTFORM  　　　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:71
;	PRINTFORM [药的材料(双)({ITEM:71})]
;	SIF ITEM:71 < 10
;		PRINT  
;	PRINTFORM  
;	CALL LINE_FEED
;ENDIF
;IF ITEM:72
;	PRINTFORM [药的材料(消)({ITEM:72})]
;	SIF ITEM:72 < 10
;		PRINT  
;	PRINTFORM  
;	CALL LINE_FEED
;ENDIF
;IF ITEM:78
;	PRINTFORM [漏尿治愈({ITEM:78})]
;	SIF ITEM:78 < 10
;		PRINT  
;	PRINTFORM  
;	CALL LINE_FEED
;ENDIF
;IF ITEM:75
;	PRINTFORM [丰胸剂({ITEM:75})]
;	SIF ITEM:75 < 10
;		PRINT  
;	PRINTFORM  　　　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:76
;	PRINTFORM [缩胸剂({ITEM:76})]
;	SIF ITEM:76 < 10
;		PRINT  
;	PRINTFORM  　　　
;	CALL LINE_FEED
;ENDIF
;
;IF ITEM:93
;	PRINTFORM [隆根剂({ITEM:93})]
;	SIF ITEM:93 < 10
;		PRINT  
;	PRINTFORM  　　　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:94
;	PRINTFORM [缩根剂({ITEM:93})]
;	SIF ITEM:93 < 10
;		PRINT  
;	PRINTFORM  　　　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:77
;	PRINTFORM [抑母乳药({ITEM:77})]
;	E = 0
;	PRINTL 
;ENDIF
;IF ITEM:73
;	PRINTFORM [母乳体质({ITEM:73})]
;	CALL LINE_FEED
;ENDIF
;IF ITEM:74
;	PRINTFORM [处子再生({ITEM:74})]
;	CALL LINE_FEED
;ENDIF
;IF ITEM:79
;	PRINTFORM [堕胎药({ITEM:79})]
;	E = 0
;	PRINTL 
;ENDIF
;IF ITEM:80
;	PRINTFORM [性转换的药({ITEM:80})]
;	SIF ITEM:80 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:81
;	PRINTFORM [天使的奇迹({ITEM:81})]
;	SIF ITEM:81 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:82
;	PRINTFORM [恶魔的祝福({ITEM:82})]
;	SIF ITEM:82 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:70
;	PRINTFORM [河童的妙药({ITEM:70})]
;	SIF ITEM:70 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:90
;	PRINTFORM [记忆消除药({ITEM:90})]
;	SIF ITEM:90 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:91
;	PRINTFORM [排卵诱发剂({ITEM:91})]
;	SIF ITEM:91 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
;IF ITEM:92
;	PRINTFORM [高性能避孕具({ITEM:92})]
;	SIF ITEM:92 < 10
;		PRINT  
;	PRINTFORM  
;	CALL LINE_FEED
;ENDIF
;IF ITEM:96
;	PRINTFORM [精神修复药({ITEM:96})] 
;	SIF ITEM:96 < 10
;		PRINT  
;	PRINTFORM  　
;	CALL LINE_FEED
;ENDIF
IF ITEM:97
	PRINTFORM [约会券({ITEM:97})]
	SIF ITEM:97 < 10
		PRINT
	PRINT 　　　
	CALL LINE_FEED
ENDIF

;最後に改行されてなければ、ここで改行
SIF E % 4 != 0
	PRINTL 
