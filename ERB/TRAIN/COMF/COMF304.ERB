;--------------------------------------------------
;触手阴道扩张
;--------------------------------------------------
@COM304
PRINTL 触手阴道扩张
STR:0 = 触手阴道扩张


;V经验を伴う指令のフラグ(处女膜再生对応)
TFLAG:19 = 1
SIF (TALENT:3 || TALENT:6) && ASSIPLAY == 0 && EXP:0 == 0
	TFLAG:20 = 1

;处女喪失時のテ接吻ト用処理
SIF TFLAG:60 && (PREVCOM == 60 || PREVCOM == 61 || PREVCOM == 66 || PREVCOM == 68 || PREVCOM == 69) && ((ASSIPLAY && TFLAG:50) || (ASSIPLAY == 0 && TFLAG:50 == 0)) && TFLAG:31
	TFLAG:31 = 2
;-------------------------------------------------
;ソースの計算
;-------------------------------------------------
LOSEBASE:0 += 250
LOSEBASE:1 += 150

SOURCE:7 = 1500
SOURCE:13 = 1000
SOURCE:14 = 1000
SOURCE:17 = 4200
SOURCE:8 = 1000


;ABL:Ｖ感觉をみる
IF ABL:4 == 0
	SOURCE:1 = 2000
ELSEIF ABL:4 == 1
	SOURCE:1 = 2500
ELSEIF ABL:4 == 2
	SOURCE:1 = 3000
ELSEIF ABL:4 == 3
	SOURCE:1 = 3300
ELSEIF ABL:4 == 4
	SOURCE:1 = 3600
ELSE
	SOURCE:1 = 3800
ENDIF

;EXP:Ｖ经验をみる
IF EXP:0 < EXPLV:1
	TIMES SOURCE:1 , 0.20
	SOURCE:7 += 20000
	SOURCE:10 += 2000
	IF TALENT:PLAYER:140 == 0
		EXP:50 += 1
		PRINTFORML %EXPNAME:50%＋1
	ENDIF
ELSEIF EXP:0 < EXPLV:2
	TIMES SOURCE:1 , 0.60
	SOURCE:7 += 300
ELSEIF EXP:0 < EXPLV:3
	TIMES SOURCE:1 , 1.00
	SOURCE:7 += 50
ELSEIF EXP:0 < EXPLV:4
	TIMES SOURCE:1 , 1.20
	SOURCE:7 += 10
ELSEIF EXP:0 < EXPLV:5
	TIMES SOURCE:1 , 1.40
	SOURCE:7 += 0
ELSE
	TIMES SOURCE:1 , 1.60
	SOURCE:7 += 0
ENDIF

;触手经验を見る
IF EXP:55 < EXPLV:1
	TIMES LOSEBASE:0 , 3.00
	TIMES LOSEBASE:1 , 3.00
	SOURCE:7 += 1000
ELSEIF EXP:55 < EXPLV:2
	TIMES LOSEBASE:0 , 2.50
	TIMES LOSEBASE:1 , 2.50
	SOURCE:7 += 800
ELSEIF EXP:55 < EXPLV:3
	TIMES LOSEBASE:0 , 2.00
	TIMES LOSEBASE:1 , 2.00
	SOURCE:7 += 500
ELSEIF EXP:55 < EXPLV:4
	TIMES LOSEBASE:0 , 1.00
	TIMES LOSEBASE:1 , 1.00
	SOURCE:7 += 100
ELSEIF EXP:55 < EXPLV:5
	TIMES LOSEBASE:0 , 0.80
	TIMES LOSEBASE:1 , 0.80
	SOURCE:7 += 50
ELSE
	TIMES LOSEBASE:0 , 0.60
	TIMES LOSEBASE:1 , 0.60
ENDIF

;触手经验
IF EXP:55 < EXPLV:1
	SOURCE:9 = 1500
	TIMES SOURCE:8 , 0.50
ELSEIF EXP:55 < EXPLV:2
	TIMES LOSEBASE:0 , 0.90
	TIMES LOSEBASE:1 , 0.90
	SOURCE:9 = 1700
	TIMES SOURCE:8 , 0.80
ELSEIF EXP:55 < EXPLV:3
	TIMES LOSEBASE:0 , 0.80
	TIMES LOSEBASE:1 , 0.80
	SOURCE:9 = 2000
ELSEIF EXP:55 < EXPLV:4
	TIMES LOSEBASE:0 , 0.70
	TIMES LOSEBASE:1 , 0.70
	SOURCE:9 = 2500
	TIMES A , 1.20
ELSEIF EXP:55 < EXPLV:5
	TIMES LOSEBASE:0 , 0.60
	TIMES LOSEBASE:1 , 0.60
	SOURCE:9 = 3300
	TIMES SOURCE:8 , 1.50
ELSE
	TIMES LOSEBASE:0 , 0.50
	TIMES LOSEBASE:1 , 0.50
	SOURCE:9 = 4200
	TIMES SOURCE:8 , 1.80
ENDIF

;小人体形
SIF TALENT:142
	TIMES SOURCE:7 , 2.00

;汚れ処理
STAIN:3 |= 32

IF EXP:52 == 0
	EXP:50 += 1
	PRINTL 异常经验＋1
ENDIF
EXP:0 += 25
PRINTL Ｖ经验＋25
EXP:52 += 1
PRINTL Ｖ扩张经验＋1

觸手 = 1

;触手装着中は依赖度ベクトル強制变更
;依赖度ベクトル
TFLAG:33 = 5

;依赖度補正値(服从で1、隶属で2　強制变更なので、これまでの数値を重置）
IF TALENT:5 && ASSIPLAY == 0
	TFLAG:30 = 2
ELSEIF TALENT:8 && ASSIPLAY == 0
	TFLAG:30 = 4
ENDIF

RETURN 1


