;-------------------------------------------------
;挤奶器
;道具使用指令、レベル3
;-------------------------------------------------
@COM49

IF TEQUIP:25
	PRINTL 触手挤奶
	STR:0 = 触手挤奶
	SELECTCOM = 165
ELSE
	PRINTL 挤奶器
	STR:0 = 挤奶器
ENDIF


;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
;消費体力、气力
LOSEBASE:0 += 50
LOSEBASE:1 += 100

SOURCE:3 = 200
SOURCE:7 = 100
SOURCE:9 = 100
SOURCE:13 = 30
SOURCE:14 = 100
SOURCE:17 = 100
SOURCE:18 = 100


;-------------------------------------------------
;特殊ソース処理
;-------------------------------------------------
;性压抑、抵抗持ちには、抑郁ソース追加
SIF TALENT:32 || TALENT:34
	SOURCE:16 += 100

;中毒による中毒充足のソースは先に処理しておく
;喷乳成瘾を見る
IF ABL:17 == 1
	TIMES SOURCE:9 , 0.00
ELSEIF ABL:17 == 2
	TIMES SOURCE:9 , 0.30
ELSEIF ABL:17 == 3
	TIMES SOURCE:9 , 0.60
ELSEIF ABL:17 == 4
	TIMES SOURCE:9 , 0.90
ELSEIF ABL:17 == 5
	TIMES SOURCE:9 , 1.20
ELSEIF ABL:17 == 6
	TIMES SOURCE:9 , 1.50
ELSEIF ABL:17 == 7
	TIMES SOURCE:9 , 1.80
ELSEIF ABL:17 == 8
	TIMES SOURCE:9 , 2.30
ELSEIF ABL:17 == 9
	TIMES SOURCE:9 , 3.00
ELSEIF ABL:17 >= 10
	TIMES SOURCE:9 , 5.00
ENDIF

;-------------------------------------------------
;汚れの処理
;-------------------------------------------------
;触手挤奶なら、触手体液が胸に付く
SIF TEQUIP:25
	STAIN:5 |= 32

;-------------------------------------------------
;经验の処理
;-------------------------------------------------
;蔷薇经验とか加算
CALL COM_EXP(1)



;触手召喚時、触手经验の重置をする
SIF TEQUIP:25 == 1
	觸手 = 0

;依赖度ベクトル
TFLAG:33 = 3

CALL KOJO_MESSAGE_COM

;着脱の処理
IF TEQUIP:17 == 0
	TEQUIP:17 = 1
	;触手挤奶は触手の汚れを追加
	IF TEQUIP:25
		STAIN:5 |= 32
	ENDIF
ELSE
	TEQUIP:17 = 0
ENDIF
RETURN 1


;-------------------------------------------------
;装着継続の処理
;-------------------------------------------------
@EQUIP_COM49
;挤奶器装备中
IF TEQUIP:25
	PRINTL ＜触手挤奶中＞
ELSE
	PRINTL ＜挤奶器装备中＞
ENDIF

;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
LOSEBASE:0 += 25
LOSEBASE:1 += 50

SOURCE:3 += 100
SOURCE:7 += 50
SOURCE:9 += 50
SOURCE:13 += 15
SOURCE:14 += 50
SOURCE:17 += 50
SOURCE:18 += 50


;-------------------------------------------------
;经验の処理
;-------------------------------------------------
;触手经验加算
SIF TEQUIP:25 == 1
	觸手 += 1


RETURN 1

