@LUNCH_STALL_SUP

SIF FLAG:30 < 2
	RETURN
SIF FLAG:23 == 1
	RETURN

PRINTL 
T = 0
E = 0
F = 0
D = 0
PRINTL 要让其他的奴隶来支援吗？
PRINTL [0] - 是
PRINTL [1] - 否
$INPUT_LOOP
INPUT
IF RESULT == 0
	CALL LUNCH_STALL_SUP2
ELSEIF RESULT == 1
	RETURN
ELSE
	GOTO INPUT_LOOP
ENDIF





@LUNCH_STALL_SUP2

SIF FLAG:23 > -2
	CALL LUNCH_STALL_SUP3

SIF FLAG:23 > -2
	RETURN

REPEAT 100
	G:COUNT = 0
REND

PRINTL 请确定支援的奴隶人选

REPEAT CHARANUM
	SIF COUNT == MASTER || COUNT == A
		CONTINUE
	SIF CFLAG:COUNT:1 < 2
		CONTINUE
	SIF CFLAG:COUNT:12 > 0
		CONTINUE
	C = COUNT
	CALL CHECK_CHILD_CARE
	SIF (TALENT:COUNT:3 || TALENT:COUNT:6) && BASE:COUNT:0 > 500
		PRINTFORML [{COUNT}] - %CALLNAME:COUNT%
	G:COUNT = 1
REND
PRINTL [100] - 放弃


$INPUT_LOOP
INPUT
IF RESULT == 100
	PRINTFORMW 放弃让其他奴隶支援
	RETURN
ELSEIF G:RESULT == 0
	GOTO INPUT_LOOP
ELSE
	E = RESULT
ENDIF



;奴隶の料理技能と家务经验のレベルによって、料理の内容と値段の基礎値が上昇
;ABL:料理技能をみる
IF ABL:E:12 == 0
	T += 0
ELSEIF ABL:E:12 == 1
	T += 600
ELSEIF ABL:E:12 == 2
	T += 1000
ELSEIF ABL:E:12 == 3
	T += 1500
ELSEIF ABL:E:12 == 4
	T += 2100
ELSEIF ABL:E:12 == 5
	T += 2800
ELSEIF ABL:E:12 == 6
	T += 3600
ELSEIF ABL:E:12 == 7
	T += 4500
ELSEIF ABL:E:12 == 8
	T += 5500
ELSEIF ABL:E:12 == 9
	T += 6600
ELSE
	T += 7800
ENDIF
SIF S
	PRINTFORML %ABLNAME:12%LV{ABL:E:12} +{T}

;家务经验による補正
IF EXP:E:61 < EXPLV:1
	D += 10
ELSEIF EXP:E:61 < EXPLV:2
	D += 200
ELSEIF EXP:E:61 < EXPLV:3
	D += 800
ELSEIF EXP:E:61 < EXPLV:4
	D += 1800
ELSEIF EXP:E:61 < EXPLV:5
	D += 3000
ELSE
	D += 5000
ENDIF
	PRINTFORML %EXPNAME:61%{EXP:E:61} +{D}
T += D

;奴隶の能力、素質による倍率計算（料理技能は前項で見ているので省略）
V = 100
;ABL:顺从をみる
IF ABL:E:0 == 0
	C = 0
ELSEIF ABL:E:0 == 1
	C = 10
ELSEIF ABL:E:0 == 2
	C = 20
ELSEIF ABL:E:0 == 3
	C = 30
ELSEIF ABL:E:0 == 4
	C = 40
ELSEIF ABL:E:0 == 5
	C = 50
ELSEIF ABL:E:0 == 6
	C = 60
ELSEIF ABL:E:0 == 7
	C = 70
ELSEIF ABL:E:0 == 8
	C = 80
ELSEIF ABL:E:0 == 9
	C = 90
ELSE
	C = 100
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:0%LV{ABL:E:0} +{C}％
V += C


;ABL:欲望をみる
IF ABL:E:1 == 0
	C = 0
ELSEIF ABL:E:1 == 1
	C = 10
ELSEIF ABL:E:1 == 2
	C = 20
ELSEIF ABL:E:1 == 3
	C = 30
ELSEIF ABL:E:1 == 4
	C = 40
ELSEIF ABL:E:1 == 5
	C = 50
ELSEIF ABL:E:1 == 6
	C = 60
ELSEIF ABL:E:1 == 7
	C = 70
ELSEIF ABL:E:1 == 8
	C = 80
ELSEIF ABL:E:1 == 9
	C = 90
ELSE
	C = 100
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:1%LV{ABL:E:1} +{C}％
V += C


;ABL:技巧をみる
IF ABL:E:2 == 0
	C = 0
ELSEIF ABL:E:2 == 1
	C = 5
ELSEIF ABL:E:2 == 2
	C = 10
ELSEIF ABL:E:2 == 3
	C = 15
ELSEIF ABL:E:2 == 4
	C = 20
ELSEIF ABL:E:2 == 5
	C = 25
ELSEIF ABL:E:2 == 6
	C = 30
ELSEIF ABL:E:2 == 7
	C = 35
ELSEIF ABL:E:2 == 8
	C = 40
ELSEIF ABL:E:2 == 9
	C = 45
ELSE
	C = 50
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:2%LV{ABL:E:2} +{C}％
V += C


;ABL:Ｖ感觉をみる
IF ABL:E:4 == 0
	C = 0
ELSEIF ABL:E:4 == 1
	C = 5
ELSEIF ABL:E:4 == 2
	C = 10
ELSEIF ABL:E:4 == 3
	C = 15
ELSEIF ABL:E:4 == 4
	C = 20
ELSEIF ABL:E:4 == 5
	C = 25
ELSEIF ABL:E:4 == 6
	C = 30
ELSEIF ABL:E:4 == 7
	C = 35
ELSEIF ABL:E:4 == 8
	C = 40
ELSEIF ABL:E:4 == 9
	C = 45
ELSE
	C = 50
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:4%LV{ABL:E:4} +{C}％
V += C


;ABL:侍奉精神をみる
IF ABL:E:7 == 0
	C = 0
ELSEIF ABL:E:7 == 1
	C = 5
ELSEIF ABL:E:7 == 2
	C = 10
ELSEIF ABL:E:7 == 3
	C = 15
ELSEIF ABL:E:7 == 4
	C = 20
ELSEIF ABL:E:7 == 5
	C = 25
ELSEIF ABL:E:7 == 6
	C = 30
ELSEIF ABL:E:7 == 7
	C = 35
ELSEIF ABL:E:7 == 8
	C = 40
ELSEIF ABL:E:7 == 9
	C = 45
ELSE
	C = 50
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:7%LV{ABL:E:7} +{C}％
V += C


;ABL:露出癖をみる
IF ABL:E:8 == 0
	C = 0
ELSEIF ABL:E:8 == 1
	C = 5
ELSEIF ABL:E:8 == 2
	C = 10
ELSEIF ABL:E:8 == 3
	C = 15
ELSEIF ABL:E:8 == 4
	C = 20
ELSEIF ABL:E:8 == 5
	C = 25
ELSEIF ABL:E:8 == 6
	C = 30
ELSEIF ABL:E:8 == 7
	C = 35
ELSEIF ABL:E:8 == 8
	C = 40
ELSEIF ABL:E:8 == 9
	C = 45
ELSE
	C = 50
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:8%LV{ABL:E:8} +{C}％
V += C


;ABL:受虐属性をみる
IF ABL:E:9 == 0
	C = 0
ELSEIF ABL:E:9 == 1
	C = 5
ELSEIF ABL:E:9 == 2
	C = 10
ELSEIF ABL:E:9 == 3
	C = 15
ELSEIF ABL:E:9 == 4
	C = 20
ELSEIF ABL:E:9 == 5
	C = 25
ELSEIF ABL:E:9 == 6
	C = 30
ELSEIF ABL:E:9 == 7
	C = 35
ELSEIF ABL:E:9 == 8
	C = 40
ELSEIF ABL:E:9 == 9
	C = 45
ELSE
	C = 50
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:9%LV{ABL:E:9} +{C}％
V += C


;ABL:嗜虐属性をみる
IF ABL:E:10 == 0
	C = 0
ELSEIF ABL:E:10 == 1
	C = 5
ELSEIF ABL:E:10 == 2
	C = 10
ELSEIF ABL:E:10 == 3
	C = 15
ELSEIF ABL:E:10 == 4
	C = 20
ELSEIF ABL:E:10 == 5
	C = 25
ELSEIF ABL:E:10 == 6
	C = 30
ELSEIF ABL:E:10 == 7
	C = 35
ELSEIF ABL:E:10 == 8
	C = 40
ELSEIF ABL:E:10 == 9
	C = 45
ELSE
	C = 50
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:10%LV{ABL:E:10} +{C}％
V += C


;ABL:歌唱技能をみる
IF ABL:E:14 == 0
	C = 0
ELSEIF ABL:E:14 == 1
	C = 5
ELSEIF ABL:E:14 == 2
	C = 10
ELSEIF ABL:E:14 == 3
	C = 15
ELSEIF ABL:E:14 == 4
	C = 20
ELSEIF ABL:E:14 == 5
	C = 25
ELSEIF ABL:E:14 == 6
	C = 30
ELSEIF ABL:E:14 == 7
	C = 35
ELSEIF ABL:E:14 == 8
	C = 40
ELSEIF ABL:E:14 == 9
	C = 45
ELSE
	C = 50
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:14%LV{ABL:E:14} +{C}％
V += C


;ABL:性成瘾をみる
IF ABL:E:18 == 0
	C = 0
ELSEIF ABL:E:18 == 1
	C = 10
ELSEIF ABL:E:18 == 2
	C = 20
ELSEIF ABL:E:18 == 3
	C = 30
ELSEIF ABL:E:18 == 4
	C = 40
ELSEIF ABL:E:18 == 5
	C = 50
ELSEIF ABL:E:18 == 6
	C = 60
ELSEIF ABL:E:18 == 7
	C = 70
ELSEIF ABL:E:18 == 8
	C = 80
ELSEIF ABL:E:18 == 9
	C = 90
ELSE
	C = 100
ENDIF
SIF C > 0
	PRINTFORML %ABLNAME:18%LV{ABL:E:18} +{C}％
V += C


;陷落素質
;恋慕
IF TALENT:E:3
	C = 100
	V += 100
	PRINTFORML %TALENTNAME:3% ＋{C}％
ENDIF
;淫乱
IF TALENT:E:4
	C = 30
	V -= 30
	PRINTFORML %TALENTNAME:4% －{C}％
ENDIF
;服从
IF TALENT:E:5
	C = 50
	V -= 50
	PRINTFORML %TALENTNAME:5% ＋{C}％
ENDIF
;相亲相爱
IF TALENT:E:6
	C = 200
	V += 200
	PRINTFORML %TALENTNAME:6% ＋{C}％
ENDIF
;娼妇
IF TALENT:E:7
	C = 60
	V -= 60
	PRINTFORML %TALENTNAME:7% －{C}％
ENDIF
;隶属
IF TALENT:E:8
	C = 100
	V -= 100
	PRINTFORML %TALENTNAME:8% ＋{C}％
ENDIF



;其他素質
;胆怯
IF TALENT:E:10
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:10% ＋{C}％
ENDIF
;反抗
IF TALENT:E:11
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:11% －{C}％
ENDIF
;刚强
IF TALENT:E:12
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:12% ＋{C}％
ENDIF
;直率
IF TALENT:E:13
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:13% ＋{C}％
ENDIF
;老实
IF TALENT:E:14
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:14% ＋{C}％
ENDIF
;高傲
IF TALENT:E:15
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:15% －{C}％
ENDIF
;自大
IF TALENT:E:16
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:16% －{C}％
ENDIF
;自卑
IF TALENT:E:17
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:17% ＋{C}％
ENDIF
;傲娇
IF TALENT:E:18
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:18% ＋{C}％
ENDIF
;自制力
IF TALENT:E:20
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:20% ＋{C}％
ENDIF
;无动于衷
IF TALENT:E:21
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:21% －{C}％
ENDIF
;缺乏感情
IF TALENT:E:22
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:22% －{C}％
ENDIF
;难以越过的底线
IF TALENT:E:27
	C = 15
	V += 15
	PRINTFORML %TALENTNAME:27% ＋{C}％
ENDIF
;喜欢引人注目
IF TALENT:E:28
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:28% ＋{C}％
ENDIF
;贞操重视
IF TALENT:E:30
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:30% ＋{C}％
ENDIF
;贞操淡漠
IF TALENT:E:31
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:31% －{C}％
ENDIF
;学得快
IF TALENT:E:50
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:50% ＋{C}％
ENDIF
;学得慢
IF TALENT:E:51
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:51% －{C}％
ENDIF
;擅长料理
IF TALENT:E:59
	C = 40
	V += 40
	PRINTFORML %TALENTNAME:59% ＋{C}％
ENDIF
;自我奉献
IF TALENT:E:63
	C = 15
	V += 15
	PRINTFORML %TALENTNAME:63% ＋{C}％
ENDIF
;讨厌男人
IF TALENT:E:82
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:82% －{C}％
ENDIF
;盲信
IF TALENT:E:86
	C = 15
	V += 15
	PRINTFORML %TALENTNAME:86% ＋{C}％
ENDIF
;小恶魔
IF TALENT:E:87
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:87% ＋{C}％
ENDIF
;妖狐
IF TALENT:E:91
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:91% ＋{C}％
ENDIF
;魅力
IF TALENT:E:92
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:92% ＋{C}％
ENDIF
;谜之魅力
IF TALENT:E:94
	C = 50
	V += 50
	PRINTFORML %TALENTNAME:94% ＋{C}％
ENDIF
;贫乳
IF TALENT:E:109
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:109% －{C}％
ENDIF
;绝壁
IF TALENT:E:110
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:110% －{C}％
ENDIF
;巨乳
IF TALENT:E:111
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:111% ＋{C}％
ENDIF
;爆乳
IF TALENT:E:112
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:112% ＋{C}％
ENDIF
;吸血鬼
IF TALENT:E:132
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:132% －{C}％
ENDIF
;兽耳
IF TALENT:E:143
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:143% ＋{C}％
ENDIF
;人气
IF TALENT:E:145
	C = 25
	V += 25
	PRINTFORML %TALENTNAME:145% ＋{C}％
ENDIF
;怀孕
IF TALENT:E:153
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:153% ＋{C}％
ENDIF
;母性
IF TALENT:E:155
	C = 60
	V += 60
	PRINTFORML %TALENTNAME:155% ＋{C}％
ENDIF
;LONG MODE
IF FLAG:5 == 1
	TIMES V , 0.4
	PRINTFORML LONG MODE × 0.4
ENDIF

;サポート
TIMES V , 0.5
PRINTL サポート × 0.5


;補正値の適用
T *= V
T /= 100


;崩溃,疯癫は利潤をかなり低くする（顺从によって、80％まで回復）
IF TALENT:E:9 || TALENT:E:141
PRINTL 
	IF TALENT:E:9
		S *= ABL:E:0
		TIMES S , 0.08
		Z = ABL:E:0
		Z *= 8
		PRINTFORML %TALENTNAME:9% ×{Z}％
	ELSEIF TALENT:E:141
		S *= ABL:E:0
		TIMES S , 0.08
		Z = ABL:E:0
		Z *= 8
		PRINTFORML %TALENTNAME:141% ×{Z}％
	ENDIF
PRINTL 
ENDIF


;困难度処理
;EASY
IF FLAG:4 == 1
	TIMES S , 1.20
;NORMAL
ELSEIF FLAG:4 == 2
	TIMES S , 1.00
;HARD
ELSEIF FLAG:4 == 3
	TIMES S , 0.80
ENDIF


;相性値
IF RELATION:A:(NO:E) > 0 || RELATION:E:(NO:A) > 0
	PRINTL 
	PRINTL 相性
	C = RELATION:A:(NO:E)
	S *= C
	S /= 100
	V = C % 100
	C /= 100
	PRINTFORM %CALLNAME:A% → %CALLNAME:E%
	PRINTFORM ：{C}.{V}
	SIF V == 0
		PRINT 0
	PRINTL 倍
	C = RELATION:E:(NO:A)
	T *= C
	T /= 100
	V = C % 100
	C /= 100
	PRINTFORM %CALLNAME:E% → %CALLNAME:A%
	PRINTFORM ：{C}.{V}
	SIF V == 0
		PRINT 0
	PRINTL 倍
ENDIF
S += T
PRINT  



@LUNCH_STALL_SUP3


PRINTL ※要加入支援人员的话需要增设售餐棚
PRINTL 
PRINTL 增设需要耗费$50,000的金钱
IF MONEY < 50000
	PRINTW 
	PRINTFORML 余额不足，不得不放弃增设……
	PRINTL 
	RETURN
ENDIF

PRINTL 要增设吗？
PRINTL [0] - 是
PRINTL [1] - 否


$INPUT_LOOP
INPUT
IF RESULT == 0
	PRINTL 支付了$50,000增设了售餐棚
	PRINTL 这样的话就能在新的售餐棚里工作了
	MONEY -= 50000
	FLAG:23 = -2
ELSEIF RESULT == 1
	PRINTL 放弃了增设售餐棚
ELSE
	GOTO INPUT_LOOP
ENDIF



